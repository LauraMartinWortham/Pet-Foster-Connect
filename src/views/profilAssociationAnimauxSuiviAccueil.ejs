<%- include('partials/header') %>

<main>
  <h1 class="my-6 ml-4 mb-6 text-xl">Mon espace association</h1>
  
  <!-- Conteneur général qui contient tout le dashboard -->
  <div class="flex flex-col content-center justify-center mx-4 mb-4 lg:px-40">
    
    <nav class=#>
      <ul class="flex gap-x-2 justify-center font-semibold md:justify-start md:ml-10">
        <li><button id="dashbtn-1" class="dashbtn ">Mon profil</button></li>
        <li><button id="dashbtn-2" class="dashbtn">Demandes</button></li>
        <li><button id="dashbtn-3" class="dashbtn dashbtn-active">Nos animaux</button></li>
      </ul>
    </nav>
    
    <!-- Conteneur du sous menu et de la section -->
    <div class="flex flex-col bg-zoning rounded-lg">
      
      <nav class="rounded-lg">
        <ul class="rounded-t-lg flex bg-accents2 justify-stretch font-semibold text-fond text-sm md:justify-start md:pl-8">
          <li class=" rounded-tl-lg block grow text-left pl-2 border-r-2 border-r-zoning py-2 hover:underline md:grow-0 md:px-4 md:rounded-none md:border-l-2 md:border-l-zoning bor"><a href="/associations/profil/animaux">Nos animaux</a></li>
          <li class="dashsubbtn-active block grow text-center border-r-solid border-r-2 border-r-zoning py-2 hover:underline md:grow-0 md:px-4 "><a href="/associations/profil/animaux/suivi">Suivi accueils</a></li>
          <li class="block grow text-right pr-2 py-2 rounded-tr-lg hover:underline md:grow-0 md:px-4 md:rounded-none md:border-r-solid md:border-r-2 md:border-r-zoning"><a href="/associations/profil/animaux/nouveau-profil">Créer un profil</a></li>
        </ul>
      </nav>
      
      <section class="flex flex-col justify-center content-center" id="dashboard-container">
        
        <h3 class="text-center hidden md:inline font-grands text-4xl font-extrabold mt-4">Suivi des animaux accueillis</h3>
        
        <table class=" m-4 text-left ">
          
          <tr class="border-none bg-zoning text-sm font-grands">
            <th>Nom Animal</th>
            <th>Famille d'Accueil</th>
          </tr>
          
          <% animals.forEach(animal => { %>
            
            <tr class="view  text-fond text-sm bg-accents2 font-grands font-semibold p-3 border-accents2-dark border-solid border-1 hover:bg-accents2-dark">
              <td class="px-2 pt-2  border-accents2-dark border-solid border-1"><%= animal.nom %></td>
              <td class="px-2 pt-2  border-accents2-dark border-solid border-1"><%= animal.accueillant.nom %></td>
            </tr>
            
            <tr class="fold hidden mb-3 bg-fond rounded-b-lg ">
              
              <td class="w-full rounded-xl" colspan="2">
                
                <!-- CONTENEUR POUR LES INFORMATIONS -->
                <div class="flex flex-wrap p-2 justify-center md:flex-nowrap" >
                  
                  <!-- Partie Animal -->
                  <div class="w-full md:w-1/2">
                    
                    <h3 class="font-body font-bold">Animal</h3>
                    
                    <div class="flex p-6 pb-4">
                      <div class="flex flex-col gap-2">
                        <img class="w-28 rounded-lg" src="<%= animal.images_animal[0].url %>" alt="Photo de <%= animal.nom %>">
                        <a class="rounded-full block bg-accents1 text-fond w-16 text-center text-xs font-semibold py-1 hover:underline" href="/associations/profil/animaux/<%= animal.id %>">Détails</a>
                      </div>
                      
                      <div class="pl-4">
                        <p class="text-base italic leading-3">Nom</p>
                        <p class="text-base font-semibold"><%= animal.nom %></p>
                      </div>
                    </div>
                    
                    <div class="grid grid-cols-2 px-6 gap-y-2">
                      <div class="">
                        <p class="text-sm italic leading-3">Nom</p>
                        <p class="text-base font-semibold"><%= animal.nom %></p>
                      </div>
                      
                      <div>
                        <p class="text-sm italic leading-3">Age</p>
                        <p class="text-base font-semibold"><%= animal.age %> ans</p>
                      </div>
                      
                      <div>
                        <p class="text-sm italic leading-3">Sexe</p>
                        <p class="text-base font-semibold"><%= animal.sexe %></p>
                      </div>
                      
                      <% if (animal.race) { %>
                        <div>
                          <p class="text-sm italic leading-3">Race</p>
                          <p class="text-base font-semibold"><%= animal.race %></p>
                        </div>
                        <% } %>
                      </div>
                      
                      
                      <% if (animal.tags) { %>
                        <div class="flex flex-wrap mt-4 px-6 gap-1">
                          <% animal.tags.forEach(tag => { %>
                            
                            <p class="group rounded-full block bg-accents1 text-fond text-center text-xs font-semibold py-1 px-2">
                              <%= tag.nom %>
                              <span class="group-hover:block hidden z-10 bg-accents2-dark text-fond absolute w-40 px-2 py-2 rounded-b-xl rounded-tr-xl">
                                <%= tag.description  %>
                              </span>
                            </p>
                            
                            <% }) %>
                          </div>
                          <% } %>
                          
                        </div>
                        
                        
                        <hr class="border-t-accents2 w-2/4 border-t-2 border-solid justify-self-center my-4 md:hidden">
                        
                        <!-- PARTIE FAMILLE -->
                        <div class="w-full md:w-1/2">
                          
                          <h3 class="font-body font-bold mb-4">Famille</h3>
                          
                          <div class="px-6 mb-3 md:grid-cols-2 md:grid">
                            <div class="mb-2 mt-2">
                              <p class="text-sm italic leading-3">Nom</p>
                              <p class="text-base font-semibold"><%= animal.accueillant.nom %></p>
                            </div>
                            <div class="mb-2">
                              <p class="text-sm italic leading-3">Téléphone</p>
                              <p class="text-base font-semibold"><%= animal.accueillant.telephone %></p>
                            </div>
                            <div class="mb-2">
                              <p class="text-sm italic leading-3">e-mail</p>
                              <p class="text-base font-semibold"><%= animal.accueillant.identifiant_famille.email %></p>
                            </div>
                            <div class="mb-2">
                              <p class="text-sm italic leading-4">Adresse</p>
                              <p class="text-base font-semibold leading-3"><%= animal.accueillant.rue %></p>
                              <p class="text-base font-semibold "><%= animal.accueillant.code_postal %> <%= animal.accueillant.commune  %></p>
                            </div>
                            <div class="mb-2">
                              <p class="text-sm italic leading-3">Pays</p>
                              <p class="text-base font-semibold"><%= animal.accueillant.pays %></p>
                            </div>
                            <div>
                              <p class="text-sm italic leading-3">Hébergement</p>
                              <p class="text-base font-semibold"><%= animal.accueillant.hebergement %></p>
                            </div>
                          </div>
                          
                        </div>
                        
                      </div>
                      
                      
                    </div>
                  </td>
                  
                  
                </tr>
                
                
                <% }) %>
                
              </table>
              
              
              
              <div class="hidden">
                <% animals.forEach(animal => { %>
                  <div class=#>
                    <h4>Nom Animal</h4>
                    <p><%= animal.nom %></p>
                    <button class=#>v</button>
                    
                    <div>
                      <img src="<%= animal.images_animal[0].url %>" alt="Photo de <%= animal.nom %>">
                      
                      <a href="/animaux/<%= animal.id %>">Détails</a>
                      
                      <h6>Espèce</h6>
                      <p><%= animal.espece.nom %></p>
                      
                      <h6>Sexe</h6>
                      <p><%= animal.sexe %></p>
                      
                      <h6>Race</h6>
                      <p><%= animal.race %></p>
                      
                      <h6>Age</h6>
                      <p><%= animal.age %>&nbsp;ans</p>
                      
                      <% if (animal.tags) { %>
                        
                        <% animal.tags.forEach(tag => { %>
                          <button><%= tag.nom %></button>
                          <% }) %>
                          <% } %>
                        </div>
                        
                      </div>
                      
                      <div class=#>
                        <h4>Famille d'accueil</h4>
                        <p>Famille <%= animal.accueillant.nom %></p>
                        <button class=#>v</button>
                        
                        <div>
                          <h5>Coordonnées</h5>
                          <h6>Nom</h6>
                          <p><%= animal.accueillant.nom %></p>
                          
                          <h6>Adresse</h6>
                          <p><%= animal.accueillant.rue %>&nbsp;<%= animal.accueillant.code_postal %>&nbsp;<%= animal.accueillant.commune %></p>
                          
                          <h6>Pays</h6>
                          <p><%= animal.accueillant.pays %></p>
                          
                          <h6>Téléphone</h6>
                          <p><%= animal.accueillant.telephone %></p>
                          
                          <h6>e-mail</h6>
                          <p><%= animal.accueillant.email %></p>
                          
                          <h6>Hébergement</h6>
                          <p><%= animal.accueillant.hebergement %></p>
                        </div>
                        
                      </div>
                      <% }) %>
                    </div>
                    
                    
                    
                    
                  </section>
                  
                  
                </main>
                
                <script src="/utils/dashboardAsso.js"></script>
                
                <%- include('partials/footer') %>